<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test Page Viewer</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
    :root {
        --primary-color: #4a90e2;
        --bg-color: #f0f2f5;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--bg-color);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        overflow: hidden;
    }

    .hidden {
        display: none !important;
    }

    #start-screen {
        text-align: center;
        width: 100%;
    }

    .btn {
        padding: 12px 24px;
        background-color: var(--primary-color);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.1s, background-color 0.2s;
    }

    .btn:active {
        transform: scale(0.95);
    }

    /* Modal Overlay */
    #modal-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10;
        opacity: 0;
        transition: opacity 0.5s ease;
        pointer-events: none;
    }

    #modal-container.visible {
        opacity: 1;
        pointer-events: auto;
    }

    .modal-box {
        background-color: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        width: 90%;
        max-width: 400px;
        text-align: center;
        display: none;
        opacity: 0;
        transform: scale(0.8); 
    }

    /* Animasi Modal */
    .modal-box.anim-in {
        display: block;
        animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    .modal-box.anim-out {
        display: block;
        animation: fadeOut 0.3s ease forwards;
    }

    @keyframes popIn {
        0% { opacity: 0; transform: scale(0.8); }
        100% { opacity: 1; transform: scale(1); }
    }

    @keyframes fadeOut {
        0% { opacity: 1; transform: scale(1); }
        100% { opacity: 0; transform: scale(0.9); }
    }

    .modal-icon {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 80px;
        height: 80px;
        border: 3px solid #ced6e0;
        border-radius: 50%;
        margin: 0 auto 25px auto; 
        font-size: 40px;
        color: #7f8c8d;
    }

    .modal-text {
        font-size: 18px;
        color: #333;
        margin-bottom: 25px;
        line-height: 1.5;
    }

    .btn-group {
        display: flex;
        justify-content: center;
        gap: 15px;
    }

    .btn-secondary {
        background-color: #e74c3c; /* Merah */
    }
    
    #age-slider-container { margin-bottom: 25px; }
    #age-slider { width: 100%; margin-top: 15px; }
    #age-value { font-weight: bold; color: var(--primary-color); }

    /* Footer */
    #main-footer {
        position: fixed;
        bottom: 20px;
        left: 0;
        width: 100%;
        text-align: center;
        font-size: 14px;
        color: #7f8c8d;
        z-index: 20;
        display: block;
    }

    .heart-icon-footer {
        color: #e74c3c;
        cursor: pointer;
        font-size: 16px;
        transition: transform 0.2s;
        display: inline-block;
    }
    .heart-icon-footer:hover { transform: scale(1.3); }

    #final-screen {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 5;
        opacity: 0;
        transition: opacity 1s;
        width: 100%;
    }
    #final-screen.visible { opacity: 1; }
    #final-screen h1 { font-size: 32px; color: #333; margin-bottom: 10px; }
</style>
</head>
<body>

    <div id="start-screen">
        <button class="btn" onclick="startFlow()">Click Here!</button>
    </div>

    <div id="modal-container">
        
        <div class="modal-box" id="step1">
            <span class="modal-icon">?</span>
            <p class="modal-text">Halo!<br>Selamat Datang</p>
            <button class="btn" onclick="nextStep(2)">OK</button>
        </div>

        <div class="modal-box" id="step2">
            <p class="modal-text">Ada yang aku mau sampein nih</p>
            <button class="btn" onclick="nextStep(3)">OK</button>
        </div>
        
        <div class="modal-box" id="step3">
            <p class="modal-text">Sebelum lanjut saya confirm dulu, ini bener Nurlita kan?</p>
            <div class="btn-group">
                <button class="btn" onclick="confirmNurlita()">Ya</button>
                <button class="btn btn-secondary" onclick="showRejectModal()">Bukan</button>
            </div>
        </div>

        <div class="modal-box" id="step-reject">
            <p class="modal-text">Oh yaudah, maaf pesan ini cuman untuk Nurlita</p>
            <button class="btn" onclick="location.reload()">OK</button>
        </div>

        <div class="modal-box" id="step4">
            <p class="modal-text">Coba aku tebak hari ini adalah hari spesial buat kamu</p>
            <div class="btn-group">
                <button class="btn" onclick="nextStep(5)">Iya</button>
                <button class="btn btn-secondary" onclick="location.reload()">Ngak</button>
            </div>
        </div>

        <div class="modal-box" id="step5">
            <p class="modal-text">Ehemm hari ini kamu bertambah usia kann...</p>
            <button class="btn" onclick="nextStep(6)">OK</button>
        </div>

        <div class="modal-box" id="step6">
            <p class="modal-text"> Ciee.. udah makin dewasa aja nih hehe</p>
            <button class="btn" onclick="nextStep(7)">OK</button>
        </div>

        <div class="modal-box" id="step7">
            <p class="modal-text">Selamat yaa.. Semoga di umur yang ke 22 ini, Hari-hari kamu selalu di penuhi dengan kebahagiaan :)</p>
            <button class="btn" onclick="nextStep(8)">OK</button>
        </div>

        <div class="modal-box" id="step8">
            <p class="modal-text">Dan semoga di tahun ini, apa yang kamu inginkan bisa terwujud</p>
            <button class="btn" onclick="nextStep(9)">Aamiin</button>
        </div>

        <div class="modal-box" id="step9">
            <p class="modal-text">Yaudah aku cuma mau ngucapin itu aja, Sukses terus dan Sehat selalu :)</p>
            <button class="btn" onclick="nextStep(10)">OK</button>
        </div>

        <div class="modal-box" id="step10">
            <p class="modal-text">Oh iya <span class="user-name"></span> terakhir nih</p>
            <button class="btn" onclick="nextStep(11)">OK</button>
        </div>

        <div class="modal-box" id="step11">
            <p class="modal-text">Coba cari ikon hati di paling bawah lalu di klik ya</p>
            <button class="btn" onclick="nextStep(12)">OK</button>
        </div>

        <div class="modal-box" id="step12">
            <p class="modal-text">Belum nemu? coba next lagi pasti ada</p>
            <button class="btn" onclick="nextStep(13)">OK</button>
        </div>

        <div class="modal-box" id="step13">
            <p class="modal-text">Kalau udah ada langsung Klik langsungg</p>
            <button class="btn" onclick="closeLastModal()">OK</button>
        </div>
    </div> <div id="final-screen" class="hidden">
        <h1>Happy Birthday <span class="user-name"></span>! üéâ</h1>
    </div>

    <footer id="main-footer">
        Made with <span class="heart-icon-footer" onclick="finishFlow()">‚ù§Ô∏è</span> by Someone
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <script>
        let currentStep = 1;
        let userName = "Teman"; 
        let userAge = 20; 
        let isModalOpen = false;

        function startFlow() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('main-footer').style.display = 'none';
            const container = document.getElementById('modal-container');
            container.classList.remove('hidden');
            setTimeout(() => {
                container.classList.add('visible');
                showStep(1);
                isModalOpen = true;
            }, 50);
        }

        function showStep(stepNumber) {
            const currentEl = document.getElementById('step' + currentStep);
            const nextEl = document.getElementById('step' + stepNumber);

            // PERBAIKAN: Logika Footer diganti ke Step 13 (Terakhir)
            if (stepNumber === 13) {
                document.getElementById('main-footer').style.display = 'block';
            }

            if (stepNumber > 1 && currentEl) {
                currentEl.classList.remove('anim-in');
                currentEl.classList.add('anim-out');
                setTimeout(() => {
                    currentEl.classList.remove('anim-out'); 
                    currentEl.style.display = 'none'; 
                    
                    // Cek apakah nextEl ada sebelum menampilkannya (untuk menghindari error di step akhir)
                    if (nextEl) {
                        nextEl.style.display = 'block';
                        nextEl.classList.add('anim-in');
                    }
                }, 300); 
            } else {
                if (nextEl) {
                    nextEl.style.display = 'block';
                    nextEl.classList.add('anim-in');
                }
            }
            currentStep = stepNumber;
        }

        function nextStep(nextStepNumber) {
            showStep(nextStepNumber);
        }

        function confirmNurlita() {
            userName = "Nurlita"; 
            const nameElements = document.getElementsByClassName('user-name');
            for (let i = 0; i < nameElements.length; i++) {
                nameElements[i].textContent = userName;
            }
            nextStep(4);
        }

        function showRejectModal() {
            const step3 = document.getElementById('step3');
            step3.classList.remove('anim-in');
            step3.style.display = 'none';

            const rejectBox = document.getElementById('step-reject');
            rejectBox.style.display = 'block';
            rejectBox.classList.add('anim-in');
            
            currentStep = 'reject'; 
        }

        function closeLastModal() {
            const lastModal = document.getElementById('step' + currentStep);
            lastModal.classList.remove('anim-in');
            lastModal.classList.add('anim-out');

            setTimeout(() => {
                document.getElementById('modal-container').classList.remove('visible');
                setTimeout(() => {
                    document.getElementById('modal-container').classList.add('hidden');
                    lastModal.style.display = 'none';
                    isModalOpen = false;
                }, 300);
            }, 300);
        }

        function finishFlow() {
            if (!isModalOpen) {
                const finalScreen = document.getElementById('final-screen');
                finalScreen.classList.remove('hidden');
                setTimeout(() => finalScreen.classList.add('visible'), 50);
                startConfetti();
                document.getElementById('main-footer').style.display = 'none';
            }
        }

        function startConfetti() {
            var duration = 100 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }
    </script>
</body>
</html>
